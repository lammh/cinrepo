<?php /*
This File was developed by Stefan Warnat <vtiger@stefanwarnat.de>

It belongs to the Workflow Designer and must not be distrubuted without the complete extension
*/
namespace Workflow;${"\x47\x4cO\x42AL\x53"}["r\x69\x65\x6d\x67\x6cx\x7aq"]="\x74\x72igg\x65\x72";${"\x47L\x4f\x42\x41\x4c\x53"}["\x70\x75\x79\x72\x6c\x67\x64\x66\x72\x63\x79"]="\x77\x6f\x72\x6bflo\x77s";${"G\x4c\x4f\x42A\x4c\x53"}["e\x69d\x74\x75\x66q\x6at\x79"]="\x66\x69l\x65";${"G\x4c\x4fB\x41L\x53"}["f\x63\x65\x64t\x72\x6f\x71"]="\x63\x6f\x6et\x65\x78\x74";${"\x47\x4cO\x42\x41\x4cS"}["c\x6d\x76l\x6bvj\x62"]="\x72\x65\x63\x6f\x72\x64";${"\x47\x4cO\x42\x41\x4cS"}["\x76\x76\x69rwx\x69\x6d\x6a\x6f\x79\x62"]="\x66il\x65pat\x68";${"\x47LO\x42\x41\x4c\x53"}["m\x64k\x6f\x72uhv\x73"]="\x75s\x65r\x4fbj";${"GLO\x42\x41\x4c\x53"}["\x77\x75\x71pe\x77\x6e\x6b\x72\x6dnw"]="\x75\x73\x65\x72";class Execute{protected$_environment=array();protected$_record=0;protected$_user=false;protected$_files=array();public function setUser($user){$ofcrorqcbk="\x75\x73\x65\x72\x4fbj";if(is_int(${${"G\x4c\x4f\x42AL\x53"}["wuq\x70e\x77\x6ek\x72\x6dn\x77"]})){$fnibcqpizmtc="\x75\x73\x65\x72";${${"G\x4cOBA\x4cS"}["\x6ddk\x6fruh\x76s"]}=\CRMEntity::getInstance("U\x73e\x72s");$userObj->id=${$fnibcqpizmtc};${${"\x47\x4cO\x42\x41LS"}["\x6d\x64k\x6fru\x68\x76\x73"]}=$userObj->retrieve_entity_info(${${"\x47LOBALS"}["\x77u\x71\x70\x65\x77\x6ek\x72m\x6e\x77"]},"\x55\x73ers");}$this->_user=${$ofcrorqcbk};}public function setEnvironment($environment){${"G\x4c\x4f\x42\x41\x4c\x53"}["\x72\x74\x6d\x64\x6eogq"]="\x65n\x76\x69r\x6f\x6eme\x6e\x74";$this->_environment=${${"G\x4c\x4f\x42\x41\x4c\x53"}["\x72\x74\x6d\x64nog\x71"]};}public function addFile($filename,$filepath,$filestoreid){${"\x47\x4c\x4fB\x41L\x53"}["\x74\x6b\x6a\x6f\x70\x74u\x77q"]="\x66\x69\x6c\x65s\x74\x6f\x72e\x69\x64";$ewypdn="f\x69\x6c\x65\x6e\x61\x6d\x65";$this->_files[]=array("\x66i\x6c\x65na\x6de"=>${$ewypdn},"fi\x6c\x65path"=>${${"G\x4cOB\x41L\x53"}["\x76\x76\x69\x72\x77x\x69\x6dj\x6f\x79\x62"]},"\x66i\x6c\x65\x73\x74\x6fr\x65\x69d"=>${${"\x47\x4c\x4fBA\x4c\x53"}["t\x6bj\x6f\x70tu\x77\x71"]},);}public function setRecord($record){$this->_record=${${"\x47LO\x42\x41LS"}["\x63\x6d\x76l\x6b\x76jb"]};}public function runByTrigger($trigger){$sllfijktkm="\x77\x66\x4d\x61na\x67\x65\x72";${"G\x4cOB\x41\x4c\x53"}["f\x65f\x6comq\x63\x75"]="\x66i\x6c\x65";if($this->_user===false){return"\x55ser\x20\x6e\x6f\x74\x20fo\x75nd (\x75\x73\x65:\x20\x73e\x74\x55s\x65r(\x75se\x72id)\x20)";}\Workflow\VTEntity::setUser($this->_user);$vjexpvfbl="\x77\x66";${"\x47\x4cOBA\x4c\x53"}["xci\x78xf\x70\x6c\x62\x68\x6e"]="\x77or\x6b\x66\x6c\x6f\x77\x73";if(!empty($this->_record)){${${"GL\x4f\x42\x41LS"}["\x66\x63\x65\x64t\x72\x6fq"]}=\Workflow\VTEntity::getForId($this->_record);}else{${"\x47\x4c\x4fB\x41\x4c\x53"}["th\x61\x71\x78u\x6a"]="\x63\x6f\x6e\x74\x65\x78\x74";${${"\x47L\x4fB\x41\x4c\x53"}["\x74h\x61qx\x75\x6a"]}=\Workflow\VTEntity::getDummy();}foreach($this->_files as${${"G\x4c\x4f\x42ALS"}["fe\x66\x6com\x71c\x75"]}){$kdyycgf="\x66\x69le";${"\x47L\x4fB\x41\x4c\x53"}["\x70\x76m\x73\x78\x66j\x69d"]="f\x69\x6c\x65";$context->addTempFile(${${"\x47\x4cO\x42\x41\x4cS"}["e\x69\x64tuf\x71\x6a\x74\x79"]}["\x66\x69\x6c\x65\x70ath"],${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["p\x76m\x73x\x66\x6a\x69d"]}["\x66\x69l\x65\x73\x74o\x72eid"],${$kdyycgf}["\x66\x69\x6c\x65\x6eam\x65"]);}${$sllfijktkm}=new\Workflow\Manager();${${"\x47LOB\x41\x4c\x53"}["p\x75yr\x6cg\x64\x66\x72\x63y"]}=$wfManager->GetWorkflows($context->getModuleName(),${${"G\x4c\x4fB\x41L\x53"}["r\x69e\x6d\x67l\x78\x7a\x71"]});$context->loadEnvironment($this->_environment);foreach(${${"G\x4cOBALS"}["\x70\x75\x79\x72l\x67\x64\x66\x72\x63y"]} as${$vjexpvfbl}){if(!$context->isAvailable()){break;}$wf->setContext(${${"\x47\x4cOB\x41\x4c\x53"}["\x66\x63\x65d\x74\x72\x6f\x71"]});$wf->start();}return count(${${"GL\x4fB\x41\x4c\x53"}["x\x63i\x78\x78\x66\x70\x6c\x62\x68\x6e"]});}public function runById($workflow_id){if($this->_user===false){return"\x55\x73er\x20n\x6ft \x66\x6fun\x64\x20(u\x73\x65: s\x65tUser(u\x73\x65r\x69d)\x20)";}\Workflow\VTEntity::setUser($this->_user);${"GL\x4f\x42\x41\x4c\x53"}["\x70\x67b\x65m\x78c\x6f"]="fil\x65";if(!empty($this->_record)){${"G\x4c\x4fB\x41\x4cS"}["c\x78\x6c\x73m\x77\x69\x75"]="\x63on\x74\x65xt";${${"\x47\x4c\x4f\x42A\x4cS"}["\x63\x78l\x73\x6d\x77\x69u"]}=\Workflow\VTEntity::getForId($this->_record);}else{${${"\x47L\x4f\x42\x41\x4c\x53"}["\x66\x63\x65\x64\x74\x72\x6f\x71"]}=\Workflow\VTEntity::getDummy();}foreach($this->_files as${${"\x47\x4c\x4fB\x41LS"}["pg\x62e\x6dx\x63o"]}){$zjwumoom="\x66il\x65";$dbrvtgaitzld="\x66\x69l\x65";$context->addTempFile(${$zjwumoom}["\x66\x69l\x65p\x61\x74h"],${${"\x47L\x4f\x42\x41LS"}["\x65\x69\x64\x74\x75\x66\x71\x6at\x79"]}["\x66i\x6ce\x73\x74ore\x69d"],${$dbrvtgaitzld}["fi\x6cenam\x65"]);}${"\x47\x4c\x4f\x42A\x4c\x53"}["\x77\x72t\x6c\x75\x6b"]="\x6fbj";${"GL\x4f\x42\x41\x4cS"}["\x65\x65azf\x68u"]="\x77o\x72\x6b\x66\x6cow\x5fi\x64";${${"\x47\x4cOB\x41\x4c\x53"}["\x77\x72\x74luk"]}=new\Workflow\Main(${${"\x47\x4c\x4f\x42A\x4cS"}["\x65\x65\x61\x7a\x66\x68\x75"]},false,$context->getUser());$obj->setExecutionTrigger("\x57F2_\x4d\x41\x4e\x55E\x4cL");$obj->isSubWorkflow(true);$obj->setContext(${${"G\x4cO\x42\x41L\x53"}["f\x63e\x64\x74\x72\x6f\x71"]});$obj->start();}}
?>